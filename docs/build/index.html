<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>multi-rate-limit 0.1.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=3afd6cc9"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="welcome-to-multi-rate-limit-s-documentation">
<h1>Welcome to multi-rate-limit’s documentation!<a class="headerlink" href="#welcome-to-multi-rate-limit-s-documentation" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-module"></span><section id="module-multi_rate_limit">
<span id="module"></span><h2>Module<a class="headerlink" href="#module-multi_rate_limit" title="Link to this heading">¶</a></h2>
<p>Package for using multiple resources while observing multiple RateLimits.</p>
<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.DayRateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">DayRateLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_in_days</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.DayRateLimit" title="Link to this definition">¶</a></dt>
<dd><p>Variant of RateLimit. Specify duration in days.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">FilePastResourceQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">len_resource</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longest_period_in_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue" title="Link to this definition">¶</a></dt>
<dd><p>Class to manage resource usage with memory and file(Optional).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue._time_resource_queue">
<span class="sig-name descname"><span class="pre">_time_resource_queue</span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue._time_resource_queue" title="Link to this definition">¶</a></dt>
<dd><p>Queue to manage resource usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>deque[Tuple[float, List[int]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue._longest_period_in_seconds">
<span class="sig-name descname"><span class="pre">_longest_period_in_seconds</span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue._longest_period_in_seconds" title="Link to this definition">¶</a></dt>
<dd><p>Information before this is forgotten.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue._file_path">
<span class="sig-name descname"><span class="pre">_file_path</span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue._file_path" title="Link to this definition">¶</a></dt>
<dd><p>File name to use when you want to reuse resource usage information in another execution.
If the file does not exist, it will be created automatically.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.add">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_resources</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.add" title="Link to this definition">¶</a></dt>
<dd><p>Add resource usage information.</p>
<p>Cancel from MultiRateLimit is protected by shield,
so it can be executed until the end unless you cancel it yourself.
On the other hand, there is a possibility that another function will be called before completion,
so if you use await internally, you need to properly make newcoming functions wait so that the integrity is not compromised.</p>
<p>In this implementation, if you try to add information with a time before the existing last resource usage information,
the resource will be forced to be used at the time of the last resource usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_time</strong> (<em>float</em>) – Resource usage time compatible with time.time().</p></li>
<li><p><strong>use_resources</strong> (<em>List</em><em>[</em><em>int</em><em>]</em>) – Resource usage amounts.
The length of list must be same as the number of resources.
Each resource usage amaount must not be negative.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.create">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">len_resource</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longest_period_in_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.create" title="Link to this definition">¶</a></dt>
<dd><p>Create a queue to manage past resouce usages with memory and file(Optional).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>len_resource</strong> (<em>int</em>) – Number of resource types.</p></li>
<li><p><strong>longest_period_in_seconds</strong> (<em>float</em>) – How far in the past should information be remembered?</p></li>
<li><p><strong>file_path</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – File name to use when you want to reuse resource usage information in another execution.
If the file does not exist, it will be created automatically.
Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An class to manage resource usage with memory and file(Optional).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_type_</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.pos_accum_resouce_within">
<span class="sig-name descname"><span class="pre">pos_accum_resouce_within</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.pos_accum_resouce_within" title="Link to this definition">¶</a></dt>
<dd><p>Returns the last index in the queue when resource usage falls within the specified amount.</p>
<p>Returns the latest index at which the cumulative amount of resource usage
exceeds the specified amount, going back from the end of the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order</strong> (<em>int</em>) – The order of resource.</p></li>
<li><p><strong>amount</strong> (<em>int</em>) – The specified amount.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The last index in the queue when resource usage falls within the specified amount.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.pos_time_after">
<span class="sig-name descname"><span class="pre">pos_time_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.pos_time_after" title="Link to this definition">¶</a></dt>
<dd><p>Returns the position on the first resource information queue after the specified time.</p>
<p>If there is no match, return the queue length.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>time</strong> (<em>float</em>) – The specified time.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The position on the first resource information queue after the specified time.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.sum_resource_after">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sum_resource_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.sum_resource_after" title="Link to this definition">¶</a></dt>
<dd><p>Returns the amount of resources of specified order used after the specified time.</p>
<p>If the specified time is before the last resource use beyond the period passed at the constructor,
it is okay to return incorrect information.
This allows old information unrelated to resource limit management to be forgotten.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>float</em>) – The specified time compatible with time.time().</p></li>
<li><p><strong>order</strong> (<em>int</em>) – The order of resource.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The amount of resources of specified order used after the specified time.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.term">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">term</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.term" title="Link to this definition">¶</a></dt>
<dd><p>Called when finished. Do nothing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.FilePastResourceQueue.time_accum_resource_within">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_accum_resource_within</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#multi_rate_limit.FilePastResourceQueue.time_accum_resource_within" title="Link to this definition">¶</a></dt>
<dd><p>Returns the last timing when resource usage falls within the specified amount.</p>
<p>Returns the latest timing at which the cumulative amount of resource usage
exceeds the specified amount, going back from the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order</strong> (<em>int</em>) – The order of resource.</p></li>
<li><p><strong>amount</strong> (<em>int</em>) – The specified amount.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The last timing compatible with time.time() when resource usage falls within the specified amount.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.HourRateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">HourRateLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_in_hours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.HourRateLimit" title="Link to this definition">¶</a></dt>
<dd><p>Variant of RateLimit. Specify duration in hours.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.IPastResourceQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">IPastResourceQueue</span></span><a class="headerlink" href="#multi_rate_limit.IPastResourceQueue" title="Link to this definition">¶</a></dt>
<dd><p>Interface to customize how used resources are managed.</p>
<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.IPastResourceQueue.add">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_resources</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#multi_rate_limit.IPastResourceQueue.add" title="Link to this definition">¶</a></dt>
<dd><p>Add resource usage information.</p>
<p>Cancel from MultiRateLimit is protected by shield,
so it can be executed until the end unless you cancel it yourself.
On the other hand, there is a possibility that another function will be called before completion,
so if you use await internally, you need to properly make newcoming functions wait so that the integrity is not compromised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_time</strong> (<em>float</em>) – Resource usage time compatible with time.time().</p></li>
<li><p><strong>use_resources</strong> (<em>List</em><em>[</em><em>int</em><em>]</em>) – Resource usage amounts.
The length of list must be same as the number of resources.
Each resource usage amaount must not be negative.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.IPastResourceQueue.sum_resource_after">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sum_resource_after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#multi_rate_limit.IPastResourceQueue.sum_resource_after" title="Link to this definition">¶</a></dt>
<dd><p>Returns the amount of resources of specified order used after the specified time.</p>
<p>If the specified time is before the last resource use beyond the period passed at the constructor,
it is okay to return incorrect information.
This allows old information unrelated to resource limit management to be forgotten.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>float</em>) – The specified time compatible with time.time().</p></li>
<li><p><strong>order</strong> (<em>int</em>) – The order of resource.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The amount of resources of specified order used after the specified time.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.IPastResourceQueue.term">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">term</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#multi_rate_limit.IPastResourceQueue.term" title="Link to this definition">¶</a></dt>
<dd><p>Called when finished.</p>
<p>Can be used to persist unrecorded data.
It is not guaranteed that it will be called, so you should make sure
that it does not cause a fatal situation even if it is not called.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.IPastResourceQueue.time_accum_resource_within">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_accum_resource_within</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#multi_rate_limit.IPastResourceQueue.time_accum_resource_within" title="Link to this definition">¶</a></dt>
<dd><p>Returns the last timing when resource usage falls within the specified amount.</p>
<p>Returns the latest timing at which the cumulative amount of resource usage
exceeds the specified amount, going back from the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order</strong> (<em>int</em>) – The order of resource.</p></li>
<li><p><strong>amount</strong> (<em>int</em>) – The specified amount.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The last timing compatible with time.time() when resource usage falls within the specified amount.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.MinuteRateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">MinuteRateLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_in_minutes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.MinuteRateLimit" title="Link to this definition">¶</a></dt>
<dd><p>Variant of RateLimit. Specify duration in minutes.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">MultiRateLimit</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit" title="Link to this definition">¶</a></dt>
<dd><p>Class for using multiple resources while observing multiple RateLimits.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._limits">
<span class="sig-name descname"><span class="pre">_limits</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._limits" title="Link to this definition">¶</a></dt>
<dd><p>Resource limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[<a class="reference internal" href="index.html#multi_rate_limit.RateLimit" title="multi_rate_limit.RateLimit">RateLimit</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._past_queue">
<span class="sig-name descname"><span class="pre">_past_queue</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._past_queue" title="Link to this definition">¶</a></dt>
<dd><p>Executed resource usage manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="index.html#multi_rate_limit.IPastResourceQueue" title="multi_rate_limit.IPastResourceQueue">IPastResourceQueue</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._current_buffer">
<span class="sig-name descname"><span class="pre">_current_buffer</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._current_buffer" title="Link to this definition">¶</a></dt>
<dd><p>Running resource usage manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CurrentResourceBuffer</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._next_queue">
<span class="sig-name descname"><span class="pre">_next_queue</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._next_queue" title="Link to this definition">¶</a></dt>
<dd><p>Waiting resource usage manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NextResourceQueue</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._loop" title="Link to this definition">¶</a></dt>
<dd><p>Cached event loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>AbstractEventLoop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._in_process">
<span class="sig-name descname"><span class="pre">_in_process</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._in_process" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronous execution tasks for internal processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[Task]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit._terminated">
<span class="sig-name descname"><span class="pre">_terminated</span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit._terminated" title="Link to this definition">¶</a></dt>
<dd><p>Whether term() has been called.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit.cancel">
<span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Coroutine</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit.cancel" title="Link to this definition">¶</a></dt>
<dd><p>Cancel the reservation of a waiting coroutine.</p>
<p>This process automatically cancels the future of the ticket.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>number</strong> (<em>int</em>) – Ticket number.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If already terminated.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Reserved resource amount and coroutine object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Optional[Tuple[List[int], Coroutine[Any, Any, Tuple[Optional[Tuple[float, List[int]]], Any]]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit.create">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#multi_rate_limit.RateLimit" title="multi_rate_limit.rate_limit.RateLimit"><span class="pre">RateLimit</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">past_queue_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Coroutine</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="index.html#multi_rate_limit.IPastResourceQueue" title="multi_rate_limit.rate_limit.IPastResourceQueue"><span class="pre">IPastResourceQueue</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_async_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit.create" title="Link to this definition">¶</a></dt>
<dd><p>Create an object for using multiple resources while observing multiple RateLimits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limits</strong> (<em>List</em><em>[</em><em>List</em><em>[</em><a class="reference internal" href="index.html#multi_rate_limit.RateLimit" title="multi_rate_limit.RateLimit"><em>RateLimit</em></a><em>]</em><em>]</em>) – Resource limits.</p></li>
<li><p><strong>past_queue_factory</strong> (<em>Callable</em><em>[</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em><em>, </em><em>Coroutine</em><em>[</em><em>Any</em><em>, </em><em>Any</em><em>, </em><a class="reference internal" href="index.html#multi_rate_limit.IPastResourceQueue" title="multi_rate_limit.IPastResourceQueue"><em>IPastResourceQueue</em></a><em>]</em><em>]</em><em>, </em><em>optional</em>) – Pass the factory method to make the executed resource usage manager.
The default is None, in which case it is managed only in memory.</p></li>
<li><p><strong>max_async_run</strong> (<em>int</em><em>, </em><em>optional</em>) – Maximum asynchronous concurrency. Defaults to 1.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the resource limit array length is 0, or if any value of the resource limit or max_async_run is non-positive.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object for using multiple resources while observing multiple RateLimits.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>_type_</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit.reserve">
<span class="sig-name descname"><span class="pre">reserve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_resources</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coro</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Coroutine</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="index.html#multi_rate_limit.ReservationTicket" title="multi_rate_limit.multi_rate_limit.ReservationTicket"><span class="pre">ReservationTicket</span></a></span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit.reserve" title="Link to this definition">¶</a></dt>
<dd><p>Schedules the task and returns a ticket to receive the result.</p>
<p>Unless explicitly stated in the return value or exception parameter of coroutine,
the use_resources of this function are considered to have been consumed at the end of coroutine execution.
If you want to change this behavior because you cannot know the exact resource consumption until after execution,
please override the resource consumption timing and amount using coroutine’s return value or ResourceOverwriteError parameter.</p>
<p>The return value of coroutine is in the following format.
((use_time, [use_resource1, use_resource2,,,]), return_value_to_user)
If you do not want to overwrite, please use the followin format.
(None, return_value_to_user)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_resources</strong> (<em>List</em><em>[</em><em>int</em><em>]</em>) – Resource reservation amount.</p></li>
<li><p><strong>coro</strong> (<em>Coroutine</em><em>[</em><em>Any</em><em>, </em><em>Any</em><em>, </em><em>Tuple</em><em>[</em><em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>float</em><em>, </em><em>List</em><em>[</em><em>int</em><em>]</em><em>]</em><em>]</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Coroutine object that is the process to reserve</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>Exception</strong> – If already terminated.</p></li>
<li><p><strong>ValueError</strong> – In case of resources list length mismatch or any single resource reservation exceeds its limit.</p></li>
<li><p><strong>ValueError</strong> – If the passed process is not a coroutine.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Ticket to receive the result.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="index.html#multi_rate_limit.ReservationTicket" title="multi_rate_limit.ReservationTicket">ReservationTicket</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit.stats">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="index.html#multi_rate_limit.RateLimitStats" title="multi_rate_limit.multi_rate_limit.RateLimitStats"><span class="pre">RateLimitStats</span></a></span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit.stats" title="Link to this definition">¶</a></dt>
<dd><p>Returns resource usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>current_time</strong> (<em>Optional</em><em>[</em><em>float</em><em>]</em><em>, </em><em>optional</em>) – The current time.
The default is None, in which case the result of time.time() is used.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If already terminated.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Resource usage.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="index.html#multi_rate_limit.RateLimitStats" title="multi_rate_limit.RateLimitStats">RateLimitStats</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.MultiRateLimit.term">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">term</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Coroutine</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#multi_rate_limit.MultiRateLimit.term" title="Link to this definition">¶</a></dt>
<dd><p>End processing.</p>
<p>Cancels all waiting processes and waits for all currently running processes to finish
and for resource managers that have already been executed to terminate.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Exception</strong> – If already terminated.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Waiting coroutines.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Coroutine[Any, Any, Tuple[Optional[Tuple[float, List[int]]], Any]]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">RateLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_in_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.RateLimit" title="Link to this definition">¶</a></dt>
<dd><p>Class to define a single resource limit.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimit._resource_limit">
<span class="sig-name descname"><span class="pre">_resource_limit</span></span><a class="headerlink" href="#multi_rate_limit.RateLimit._resource_limit" title="Link to this definition">¶</a></dt>
<dd><p>Resource limit that can be used within the period.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimit._period_in_seconds">
<span class="sig-name descname"><span class="pre">_period_in_seconds</span></span><a class="headerlink" href="#multi_rate_limit.RateLimit._period_in_seconds" title="Link to this definition">¶</a></dt>
<dd><p>Resource limit period.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimit.period_in_seconds">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">period_in_seconds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#multi_rate_limit.RateLimit.period_in_seconds" title="Link to this definition">¶</a></dt>
<dd><p>Return the resource limit period in seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Resource limit period in seconds.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimit.resource_limit">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">resource_limit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#multi_rate_limit.RateLimit.resource_limit" title="Link to this definition">¶</a></dt>
<dd><p>Return the resource limit that can be used within the period.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Resource limit that can be used within the period.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">RateLimitStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="index.html#multi_rate_limit.RateLimit" title="multi_rate_limit.rate_limit.RateLimit"><span class="pre">RateLimit</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">past_uses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_uses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_uses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.RateLimitStats" title="Link to this definition">¶</a></dt>
<dd><p>Class that represents resource usage status.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.limits">
<span class="sig-name descname"><span class="pre">limits</span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.limits" title="Link to this definition">¶</a></dt>
<dd><p>Resource limits</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[<a class="reference internal" href="index.html#multi_rate_limit.RateLimit" title="multi_rate_limit.RateLimit">RateLimit</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.past_uses">
<span class="sig-name descname"><span class="pre">past_uses</span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.past_uses" title="Link to this definition">¶</a></dt>
<dd><p>Total resource usage that has been executed for each resource limit.
(For 1 minute limit, resource usage for the past 1 minute.)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.current_uses">
<span class="sig-name descname"><span class="pre">current_uses</span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.current_uses" title="Link to this definition">¶</a></dt>
<dd><p>Total running resource usage for each resource.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.next_uses">
<span class="sig-name descname"><span class="pre">next_uses</span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.next_uses" title="Link to this definition">¶</a></dt>
<dd><p>Total waiting resource usage for each resource.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.current_use_percents">
<span class="sig-name descname"><span class="pre">current_use_percents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.current_use_percents" title="Link to this definition">¶</a></dt>
<dd><p>Returns the percentage of total executed and running resource usage relative to each resource limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The percentage of total executed and running resource usage relative to each resource limit.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.next_use_percents">
<span class="sig-name descname"><span class="pre">next_use_percents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.next_use_percents" title="Link to this definition">¶</a></dt>
<dd><p>Returns the total usage of executed, running, and waiting resources as a percentage of each resource limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The total usage of executed, running, and waiting resources as a percentage of each resource limit.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[List[float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="multi_rate_limit.RateLimitStats.past_use_percents">
<span class="sig-name descname"><span class="pre">past_use_percents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#multi_rate_limit.RateLimitStats.past_use_percents" title="Link to this definition">¶</a></dt>
<dd><p>Returns the percentage of total executed resource usage against each resource limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The percentage of total executed resource usage against each resource limit.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[List[float]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.ReservationTicket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">ReservationTicket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reserve_number</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Future</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.ReservationTicket" title="Link to this definition">¶</a></dt>
<dd><p>Class for receiving the results of processing executed through MultiRateLimit.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.ReservationTicket.reserve_number">
<span class="sig-name descname"><span class="pre">reserve_number</span></span><a class="headerlink" href="#multi_rate_limit.ReservationTicket.reserve_number" title="Link to this definition">¶</a></dt>
<dd><p>Number to interrupt execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.ReservationTicket.future">
<span class="sig-name descname"><span class="pre">future</span></span><a class="headerlink" href="#multi_rate_limit.ReservationTicket.future" title="Link to this definition">¶</a></dt>
<dd><p>Future to receive execution results.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="multi_rate_limit.ResourceOverwriteError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">ResourceOverwriteError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_resources</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Exception</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.ResourceOverwriteError" title="Link to this definition">¶</a></dt>
<dd><p>Error to customize resource usage.</p>
<p>You can use this error when you want to change the amount or timing of resource usage
while returning an exception from within a coroutine that applies RateLimit.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.ResourceOverwriteError.use_time">
<span class="sig-name descname"><span class="pre">use_time</span></span><a class="headerlink" href="#multi_rate_limit.ResourceOverwriteError.use_time" title="Link to this definition">¶</a></dt>
<dd><p>Resource usage time compatible with time.time() to be overwritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.ResourceOverwriteError.use_resources">
<span class="sig-name descname"><span class="pre">use_resources</span></span><a class="headerlink" href="#multi_rate_limit.ResourceOverwriteError.use_resources" title="Link to this definition">¶</a></dt>
<dd><p>Resource usage amounts to be overwritten.
The length of list must be same as the number of resources.
Each resource usage amaount must not be negative.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="multi_rate_limit.ResourceOverwriteError.cause">
<span class="sig-name descname"><span class="pre">cause</span></span><a class="headerlink" href="#multi_rate_limit.ResourceOverwriteError.cause" title="Link to this definition">¶</a></dt>
<dd><p>Wrap and pass the exception you originally wanted to return.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Exception</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="multi_rate_limit.SecondRateLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">multi_rate_limit.</span></span><span class="sig-name descname"><span class="pre">SecondRateLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period_in_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#multi_rate_limit.SecondRateLimit" title="Link to this definition">¶</a></dt>
<dd><p>Alias of RateLimit. Specify duration in seconds.</p>
</dd></dl>

</section>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">multi-rate-limit</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-module">Module</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, largetownsky.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>